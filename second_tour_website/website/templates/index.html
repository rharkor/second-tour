{% extends "base.html" %}
{% block title %}Calendrier{% endblock %}
{% block content %}
<div class="top-layer">
    <a href="{{url_for('main_routes.connexion')}}">
        <img alt="logo de connexion" src="{{url_for('static', filename='img/user.png')}}" class="image-login">
    </a>
</div>
<div class="d-flex flex-column align-items-center min-width-max-content">
    <div class="mb-l">
        <img alt="logo" src="{{url_for('static', filename='img/logo.png')}}" class="image-m">
    </div>
    {%- for category, message in get_flashed_messages(with_categories = true) %}
    <div class="alert alert-{{category}}  alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {%- endfor %}
    <div class="padding-main-calendar">
        <div class="calendar table-responsive">
            <div class="name-finder" style="width: max-content;">
                <input class="form-control" type="text" id="search-name" onkeyup="nameFinder()"
                    placeholder="Recherche par nom..">
                <select class="form-select finder break-doublons" onchange="finder(3, 0)" style="width: 80px;">
                    <option selected></option>
                    <option value="2021-11-01">Jour 1</option>
                    <option>Jour 2</option>
                    <option>Jour 3</option>
                </select>
            </div>
            <div class="thumbnail" style="overflow: hidden;">
                <table class="table table-light table-striped" id="calendar">
                    <thead>
                        <tr>
                            <th scope="col">Nom</th>
                            <th scope="col">Prénom</th>
                            <th scope="col">Série</th>
                            <th scope="col">Epreuve 1</th>
                            <th scope="col">Epreuve 2</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for candidat in all_candidats %}
                        <tr>
                            <td scope="row">{{candidat.nom}}</td>
                            <td scope="row">{{candidat.prenom}}</td>
                            {% for serie in all_series %}
                            {% if serie.id_serie == candidat.id_serie %}
                            <td scope="row">
                                {{serie.nom}} - {% if serie.specialite1 %}{{serie.specialite1}}{% endif %}{% if
                                serie.specialite2 %}/{{serie.specialite2}}{% endif %}
                            </td>
                            {% endif %}
                            {% endfor %}
                            {% for creneau in all_creneaux %}
                            {% if creneau.id_candidat == candidat.id_candidat %}
                            <td scope="row">
                                <div class="calendar-subject">
                                    {% for matiere in all_matieres %}
                                    {% if matiere.id_matiere == creneau.id_matiere %}
                                    <div>{{matiere.nom}} - {% if matiere.loge %}Loge {% for salle in all_salles %}{% if
                                        matiere.loge == salle.id_salle %}{{salle.numero}}{% endif %}{% endfor %}{% else
                                        %}
                                        {% for salle in all_salles %}
                                        {% if salle.id_salle == creneau.id_salle %}
                                        {{salle.numero}}
                                        {% endif %}
                                        {% endfor %}
                                        {% endif %}</div>
                                    <div>{{creneau.debut_preparation.strftime('%Hh%M')}} -
                                        {{creneau.fin.strftime('%Hh%M')}}</div>
                                    <div hidden>{{creneau.debut_preparation}}</div>
                                    {% endif %}
                                    {% endfor %}
                                </div>
                            </td>
                            {% endif %}
                            {% endfor %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<!-- Background
<canvas class="background"></canvas> -->
{% endblock %}

{% block script %}
{% endblock %}